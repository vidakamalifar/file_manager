package com.malwarebytes.filemanager.utils;

import android.Manifest;
import android.content.pm.PackageManager;
import android.util.Log;

import androidx.core.app.ActivityCompat;
import androidx.core.content.ContextCompat;

import com.malwarebytes.filemanager.activity.MainActivity;

import static android.Manifest.permission.READ_EXTERNAL_STORAGE;
import static android.Manifest.permission.WRITE_EXTERNAL_STORAGE;


public class PermissionUtils {
    public static final String TAG = "Permission ";

    private static final int PERMISSION_REQUEST_CODE = 100;

    MainActivity activity;


    public PermissionUtils(MainActivity activity) {
        this.activity = activity;
    }
    public void isReadStoragePermissionGranted() {
            if ((ContextCompat.checkSelfPermission(activity, Manifest.permission.READ_EXTERNAL_STORAGE)
                    == PackageManager.PERMISSION_GRANTED) && (ContextCompat.checkSelfPermission(activity,WRITE_EXTERNAL_STORAGE)
                    == PackageManager.PERMISSION_GRANTED) ) {
                Log.v(TAG, "Permission is granted");
            } else {
                Log.v(TAG, "Permission is revoked");
                ActivityCompat.requestPermissions(activity, new String[]{Manifest.permission.READ_EXTERNAL_STORAGE}, PERMISSION_REQUEST_CODE);
            }
    }

    public boolean checkPermission() {
        int result = 0;
        result = activity.checkSelfPermission(READ_EXTERNAL_STORAGE);
        return result == PackageManager.PERMISSION_GRANTED;
    }
}
